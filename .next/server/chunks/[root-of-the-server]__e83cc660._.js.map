{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///D:/next-project067/product-app-067/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\nconst globalForPrisma = globalThis as unknown as {\r\n    prisma:PrismaClient|undefined\r\n}\r\n\r\nexport const prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: ['query'],//// log การ query เพื่อดูว่าเกิดอะไรขึ้นบ้าง\r\n  })\r\nif (process.env.NODE_ENV !=='production')globalForPrisma.prisma"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,kBAAkB;AAIjB,MAAM,SACX,gBAAgB,MAAM,IACtB,IAAI,6HAAA,CAAA,eAAY,CAAC;IACf,KAAK;QAAC;KAAQ;AAChB;AACF,wCAAyC,gBAAgB,MAAM","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///D:/next-project067/product-app-067/app/api/products/route.ts"],"sourcesContent":["import { prisma } from '@/lib/prisma'\r\nimport { NextResponse } from 'next/server'\r\n\r\nexport async function GET() {\r\n  const products = await prisma.product.findMany({\r\n    include: {\r\n      category: true,\r\n    },\r\n  })\r\n  return NextResponse.json(products)\r\n}\r\n\r\nexport async function POST(req: Request) {\r\n  const body = await req.json()\r\n\r\n  if (\r\n    !body.name ||\r\n    !body.description ||\r\n    typeof body.price !== 'number' ||\r\n    typeof body.categoryId !== 'number'\r\n  ) {\r\n    return NextResponse.json({ error: 'ข้อมูลไม่ครบหรือผิดประเภท' }, { status: 400 })\r\n  }\r\n\r\n  // แก้ไขตรงนี้ ใช้ id แทน c_id\r\n  const categoryExists = await prisma.category.findUnique({\r\n  where: { c_id: body.categoryId },\r\n})\r\n\r\n  if (!categoryExists) {\r\n    return NextResponse.json({ error: 'ไม่พบหมวดหมู่ที่เลือก' }, { status: 400 })\r\n  }\r\n\r\n  const newProduct = await prisma.product.create({\r\n    data: {\r\n      name: body.name,\r\n      description: body.description,\r\n      price: body.price,\r\n      categoryId: body.categoryId,\r\n    },\r\n  })\r\n\r\n  return NextResponse.json(newProduct)\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,WAAW,MAAM,+GAAA,CAAA,SAAM,CAAC,OAAO,CAAC,QAAQ,CAAC;QAC7C,SAAS;YACP,UAAU;QACZ;IACF;IACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,IACE,CAAC,KAAK,IAAI,IACV,CAAC,KAAK,WAAW,IACjB,OAAO,KAAK,KAAK,KAAK,YACtB,OAAO,KAAK,UAAU,KAAK,UAC3B;QACA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;IAEA,8BAA8B;IAC9B,MAAM,iBAAiB,MAAM,+GAAA,CAAA,SAAM,CAAC,QAAQ,CAAC,UAAU,CAAC;QACxD,OAAO;YAAE,MAAM,KAAK,UAAU;QAAC;IACjC;IAEE,IAAI,CAAC,gBAAgB;QACnB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;IAEA,MAAM,aAAa,MAAM,+GAAA,CAAA,SAAM,CAAC,OAAO,CAAC,MAAM,CAAC;QAC7C,MAAM;YACJ,MAAM,KAAK,IAAI;YACf,aAAa,KAAK,WAAW;YAC7B,OAAO,KAAK,KAAK;YACjB,YAAY,KAAK,UAAU;QAC7B;IACF;IAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;AAC3B","debugId":null}}]
}